
<html>
    <head>
        <meta charset="UTF-8">
        <title>Lernraumf체llstand</title>
        <script src="js/jquery.js"></script>
        <script src="js/d3.min.js"></script>
        <script src="js/epoch.min.js"></script>
        <script src="js/moment.js"></script>
        <link rel="stylesheet" type="text/css" href="css/style.css">
        <link rel="stylesheet" type="text/css" href="css/epoch.min.css">
        <style>
div.plot {
    width: 1000px;
    height: 300px;
}
h2 {
    display: inline;
    margin-right: 10px;
}
div.info {
    float: right;
}
span.notes {
    font-family: monospace;
    margin-left: 10px;
}
        </style>
        <script>
$(document).ready(function() {
    moment.locale('en', {
        calendar: {
            sameDay: '[Today] HH:mm',
            lastDay: 'ddd HH:mm',
            nextDay: '[Tomorrow] HH:mm',
            lastWeek: 'ddd HH:mm',
            nextWeek: '[next] ddd HH:mm',
            sameElse: 'L HH:mm'
        }
    });
    moment.locale('de', {
        calendar: {
            sameDay: '[heute] HH:mm',
            lastDay: 'ddd HH:mm',
            nextDay: '[morgen] HH:mm',
            lastWeek: 'ddd HH:mm',
            nextWeek: '[n채chsten] ddd HH:mm',
            sameElse: 'L HH:mm'
        }
    });
    $.get('../rooms.json', function(spec) {
        roomsSpec = spec;
        roomsSpec.forEach(function(room) {
            $('body').append('<h2>' + room.name + '</h2>');
            $('body').append('<span id="current_users_' + room.id + '" class="current_users"/>');
            $('body').append('<span id="notes_' + room.id + '" class="notes" />');
            $('body').append(
                    '<div id="plot_' + room.id + '" style="width: 100%; height: 150px" class="epoch"/>');

            $.get('../parsed/' + room.id + '.json', function(roomData) {
                var lastValue = roomData[0].values[roomData[0].values.length - 1];
                $('#current_users_' + room.id).text(lastValue.y + ' WLAN-Nutzer (' + moment(lastValue.x).calendar() + ')');
                if (room.notes != undefined) {
                    $('#notes_' + room.id).html(room.notes);
                }
                $('#plot_' + room.id).epoch({
                    type: 'line',
                    data: roomData,
                    ticks: {bottom: 7},
                    tickFormats: {bottom: function(d) { return moment(d).calendar(); }},
                    axes: ['left', 'bottom'],
                });
            });
        });
    });
});
        </script>
    </head>
    <body>
        <div class="info">
            Kontakt: <a href="mailto:lernraeume@shakik.de">lernraeume@shakik.de</a><br/>
            <a href="about.html">체ber diese Seite / About</a>
        </div>
        <h1><a href=".">Lernraumf체llstand</a></h1>
    </body>
</html>
